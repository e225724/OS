C言語

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netdb.h>
#include <ifaddrs.h>

int main() {
    struct ifaddrs *ifaddr, *ifa;
    int family, s;
    char host[NI_MAXHOST];

    // ネットワークインターフェイスの情報を取得
    if (getifaddrs(&ifaddr) == -1) {
        perror("getifaddrs");
        exit(EXIT_FAILURE);
    }

    // ネットワークインターフェイスのループ
    for (ifa = ifaddr; ifa != NULL; ifa = ifa->ifa_next) {
        // ネットワークアドレスがない場合はスキップ
        if (ifa->ifa_addr == NULL) {
            continue;
        }

        // アドレスファミリーの取得
        family = ifa->ifa_addr->sa_family;

        // IPv4またはIPv6の場合の処理
        if (family == AF_INET || family == AF_INET6) {
            // ホスト名取得
            s = getnameinfo(ifa->ifa_addr,
                            (family == AF_INET) ? sizeof(struct sockaddr_in) :
                                                  sizeof(struct sockaddr_in6),
                            host, NI_MAXHOST,
                            NULL, 0, NI_NUMERICHOST);
            if (s != 0) {
                fprintf(stderr, "getnameinfo: %s\n", gai_strerror(s));
                exit(EXIT_FAILURE);
            }

            printf("%s: %s\n", ifa->ifa_name, host);
        }
    }

    // メモリの解放
    freeifaddrs(ifaddr);
    return 0;
}

C言語の出力結果
lo0: 127.0.0.1
lo0: ::1
lo0: fe80::1%lo0
ap1: fe80::fce2:6cff:fe10:5d3%ap1
en0: fe80::14e4:ec7a:640f:ccdc%en0
en0: 172.31.2.126
awdl0: fe80::80a1:e0ff:fe9d:679%awdl0
llw0: fe80::80a1:e0ff:fe9d:679%llw0
utun0: fe80::6bd1:c827:c063:2b8%utun0
utun1: fe80::535c:12b8:b490:4772%utun1
utun2: fe80::c155:ddc3:a04f:2821%utun2
utun3: fe80::ce81:b1c:bd2c:69e%utun3
utun4: fe80::7320:92f6:ad14:6c11%utun4
utun5: fe80::3790:8e3:66bf:909b%utun5


ifconfigの出力結果
lo0: flags=8049<UP,LOOPBACK,RUNNING,MULTICAST> mtu 16384
        options=1203<RXCSUM,TXCSUM,TXSTATUS,SW_TIMESTAMP>
        inet 127.0.0.1 netmask 0xff000000
        inet6 ::1 prefixlen 128 
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x1 
        nd6 options=201<PERFORMNUD,DAD>
gif0: flags=8010<POINTOPOINT,MULTICAST> mtu 1280
stf0: flags=0<> mtu 1280
anpi1: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
        options=400<CHANNEL_IO>
        ether 9a:2a:59:39:01:87
        media: none
        status: inactive
anpi0: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
        options=400<CHANNEL_IO>
        ether 9a:2a:59:39:01:86
        media: none
        status: inactive
en3: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
        options=400<CHANNEL_IO>
        ether 9a:2a:59:39:01:66
        nd6 options=201<PERFORMNUD,DAD>
        media: none
        status: inactive
en4: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
        options=400<CHANNEL_IO>
        ether 9a:2a:59:39:01:67
        nd6 options=201<PERFORMNUD,DAD>
        media: none
        status: inactive
en1: flags=8963<UP,BROADCAST,SMART,RUNNING,PROMISC,SIMPLEX,MULTICAST> mtu 1500
        options=460<TSO4,TSO6,CHANNEL_IO>
        ether 36:21:f6:88:d7:80
        media: autoselect <full-duplex>
        status: inactive
en2: flags=8963<UP,BROADCAST,SMART,RUNNING,PROMISC,SIMPLEX,MULTICAST> mtu 1500
        options=460<TSO4,TSO6,CHANNEL_IO>
        ether 36:21:f6:88:d7:84
        media: autoselect <full-duplex>
        status: inactive
bridge0: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
        options=63<RXCSUM,TXCSUM,TSO4,TSO6>
        ether 36:21:f6:88:d7:80
        Configuration:
                id 0:0:0:0:0:0 priority 0 hellotime 0 fwddelay 0
                maxage 0 holdcnt 0 proto stp maxaddr 100 timeout 1200
                root id 0:0:0:0:0:0 priority 0 ifcost 0 port 0
                ipfilter disabled flags 0x0
        member: en1 flags=3<LEARNING,DISCOVER>
                ifmaxaddr 0 port 8 priority 0 path cost 0
        member: en2 flags=3<LEARNING,DISCOVER>
                ifmaxaddr 0 port 9 priority 0 path cost 0
        nd6 options=201<PERFORMNUD,DAD>
        media: <unknown type>
        status: inactive
ap1: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> mtu 1500
        options=6460<TSO4,TSO6,CHANNEL_IO,PARTIAL_CSUM,ZEROINVERT_CSUM>
        ether fe:e2:6c:10:05:d3
        inet6 fe80::fce2:6cff:fe10:5d3%ap1 prefixlen 64 scopeid 0xb 
        nd6 options=201<PERFORMNUD,DAD>
        media: autoselect (<unknown type>)
        status: inactive
en0: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
        options=6460<TSO4,TSO6,CHANNEL_IO,PARTIAL_CSUM,ZEROINVERT_CSUM>
        ether fc:e2:6c:10:05:d3
        inet6 fe80::14e4:ec7a:640f:ccdc%en0 prefixlen 64 secured scopeid 0xc 
        inet 172.31.2.126 netmask 0xffffff00 broadcast 172.31.2.255
        nd6 options=201<PERFORMNUD,DAD>
        media: autoselect
        status: active
awdl0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> mtu 1500
        options=6460<TSO4,TSO6,CHANNEL_IO,PARTIAL_CSUM,ZEROINVERT_CSUM>
        ether 2a:7a:2f:94:26:87
        inet6 fe80::287a:2fff:fe94:2687%awdl0 prefixlen 64 scopeid 0xd 
        nd6 options=201<PERFORMNUD,DAD>
        media: autoselect
        status: active
llw0: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
        options=400<CHANNEL_IO>
        ether 2a:7a:2f:94:26:87
        inet6 fe80::287a:2fff:fe94:2687%llw0 prefixlen 64 scopeid 0xe 
        nd6 options=201<PERFORMNUD,DAD>
        media: autoselect
        status: inactive
utun0: flags=8051<UP,POINTOPOINT,RUNNING,MULTICAST> mtu 1500
        inet6 fe80::6bd1:c827:c063:2b8%utun0 prefixlen 64 scopeid 0xf 
        nd6 options=201<PERFORMNUD,DAD>
utun1: flags=8051<UP,POINTOPOINT,RUNNING,MULTICAST> mtu 1380
        inet6 fe80::535c:12b8:b490:4772%utun1 prefixlen 64 scopeid 0x10 
        nd6 options=201<PERFORMNUD,DAD>
utun2: flags=8051<UP,POINTOPOINT,RUNNING,MULTICAST> mtu 2000
        inet6 fe80::c155:ddc3:a04f:2821%utun2 prefixlen 64 scopeid 0x11 
        nd6 options=201<PERFORMNUD,DAD>
utun3: flags=8051<UP,POINTOPOINT,RUNNING,MULTICAST> mtu 1000
        inet6 fe80::ce81:b1c:bd2c:69e%utun3 prefixlen 64 scopeid 0x12 
        nd6 options=201<PERFORMNUD,DAD>
utun4: flags=8051<UP,POINTOPOINT,RUNNING,MULTICAST> mtu 1380
        inet6 fe80::7320:92f6:ad14:6c11%utun4 prefixlen 64 scopeid 0x13 
        nd6 options=201<PERFORMNUD,DAD>
utun5: flags=8051<UP,POINTOPOINT,RUNNING,MULTICAST> mtu 1380
        inet6 fe80::3790:8e3:66bf:909b%utun5 prefixlen 64 scopeid 0x14 
        nd6 options=201<PERFORMNUD,DAD>


出力結果の比較
ifconfigコマンドはネットワークインターフェースのフラグの状態を示しているのに対し、C言語プログラムは、フラグの状態を示していていない。また、ifconfigコマンドはinactive(使用できない)なネットワークインターフェイスも示しているが、
C言語プログラムは、activeのもののみ表示する。